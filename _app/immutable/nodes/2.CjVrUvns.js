import"../chunks/DsnmJJEf.js";import{i as Se}from"../chunks/XsFUNtTL.js";import{e as Fe,b as aa,aC as Be,s as oe,h as D,W as te,a as Ae,y as f,ao as ta,r as ra,H as la,c as ke,d as _e,k as W,X as He,$ as na,f as Ee,i as ia,aD as fe,aE as ve,g as Q,aF as Ce,ay as H,aG as Re,a3 as Pe,R as ze,j as Ge,p as sa,aH as oa,aI as he,M as Me,aJ as Ve,aK as ua,Z as Ue,aL as fa,a2 as va,aM as ca,T as Ke,F as U,aN as da,a0 as _a,_ as ha,a5 as qe,aO as ma,aP as xe,ai as ba,L as Ye,aQ as pa,aR as We,aS as ga,aT as ya,aU as Ta,aV as wa,aW as Aa,v as Ea,aj as Xe,aX as Ma,C as ce,D as F,m as J,o as $,G as de,K as S,I as N,J as w,aA as Na,aq as I,az as Sa,l as De,aY as me}from"../chunks/CfKNbmIC.js";import{s as V,e as Z,o as xa,a as Ia}from"../chunks/DI3xAFWa.js";import{i as be}from"../chunks/BwJmvh14.js";function j(e,t){return t}function ka(e,t,a){for(var r=e.items,l=[],i=t.length,n=0;n<i;n++)fa(t[n].e,l,!0);var o=i>0&&l.length===0&&a!==null;if(o){var b=a.parentNode;va(b),b.append(a),r.clear(),G(e,t[0].prev,t[i-1].next)}ca(l,()=>{for(var v=0;v<i;v++){var _=t[v];o||(r.delete(_.k),G(e,_.prev,_.next)),Ve(_.e,!o)}})}function ee(e,t,a,r,l,i=null){var n=e,o={flags:t,items:new Map,first:null},b=(t&Be)!==0;if(b){var v=e;n=D?oe(te(v)):v.appendChild(Fe())}D&&Ae();var _=null,g=!1,x=new Map,k=ta(()=>{var d=a();return ze(d)?d:d==null?[]:Pe(d)}),c,T;function s(){Ca(T,c,o,x,n,l,t,r,a),i!==null&&(c.length===0?_?Ge(_):_=Ee(()=>i(n)):_!==null&&sa(_,()=>{_=null}))}aa(()=>{T??=Ke,c=f(k);var d=c.length;if(g&&d===0)return;g=d===0;let p=!1;if(D){var A=ra(n)===la;A!==(d===0)&&(n=ke(),oe(n),_e(!1),p=!0)}if(D){for(var E=null,y,u=0;u<d;u++){if(W.nodeType===He&&W.data===na){n=W,p=!0,_e(!1);break}var h=c[u],m=r(h,u);y=Ne(W,o,E,null,h,m,u,l,t,a),o.items.set(m,y),E=y}d>0&&oe(ke())}if(D)d===0&&i&&(_=Ee(()=>i(n)));else if(ia()){var M=new Set,R=Q;for(u=0;u<d;u+=1){h=c[u],m=r(h,u);var O=o.items.get(m)??x.get(m);O?(t&(fe|ve))!==0&&Je(O,h,u,t):(y=Ne(null,o,null,null,h,m,u,l,t,a,!0),x.set(m,y)),M.add(m)}for(const[L,K]of o.items)M.has(L)||R.skipped_effects.add(K.e);R.add_callback(s)}else s();p&&_e(!0),f(k)}),D&&(n=W)}function Ca(e,t,a,r,l,i,n,o,b){var v=(n&ua)!==0,_=(n&(fe|ve))!==0,g=t.length,x=a.items,k=a.first,c=k,T,s=null,d,p=[],A=[],E,y,u,h;if(v)for(h=0;h<g;h+=1)E=t[h],y=o(E,h),u=x.get(y),u!==void 0&&(u.a?.measure(),(d??=new Set).add(u));for(h=0;h<g;h+=1){if(E=t[h],y=o(E,h),u=x.get(y),u===void 0){var m=r.get(y);if(m!==void 0){r.delete(y),x.set(y,m);var M=s?s.next:c;G(a,s,m),G(a,m,M),pe(m,M,l),s=m}else{var R=c?c.e.nodes_start:l;s=Ne(R,a,s,s===null?a.first:s.next,E,y,h,i,n,b)}x.set(y,s),p=[],A=[],c=s.next;continue}if(_&&Je(u,E,h,n),(u.e.f&he)!==0&&(Ge(u.e),v&&(u.a?.unfix(),(d??=new Set).delete(u))),u!==c){if(T!==void 0&&T.has(u)){if(p.length<A.length){var O=A[0],L;s=O.prev;var K=p[0],ae=p[p.length-1];for(L=0;L<p.length;L+=1)pe(p[L],O,l);for(L=0;L<A.length;L+=1)T.delete(A[L]);G(a,K.prev,ae.next),G(a,s,K),G(a,ae,O),c=O,s=ae,h-=1,p=[],A=[]}else T.delete(u),pe(u,c,l),G(a,u.prev,u.next),G(a,u,s===null?a.first:s.next),G(a,s,u),s=u;continue}for(p=[],A=[];c!==null&&c.k!==y;)(c.e.f&he)===0&&(T??=new Set).add(c),A.push(c),c=c.next;if(c===null)continue;u=c}p.push(u),s=u,c=u.next}if(c!==null||T!==void 0){for(var z=T===void 0?[]:Pe(T);c!==null;)(c.e.f&he)===0&&z.push(c),c=c.next;var Y=z.length;if(Y>0){var le=(n&Be)!==0&&g===0?l:null;if(v){for(h=0;h<Y;h+=1)z[h].a?.measure();for(h=0;h<Y;h+=1)z[h].a?.fix()}ka(a,z,le)}}v&&Me(()=>{if(d!==void 0)for(u of d)u.a?.apply()}),e.first=a.first&&a.first.e,e.last=s&&s.e;for(var ne of r.values())Ve(ne.e);r.clear()}function Je(e,t,a,r){(r&fe)!==0&&Ce(e.v,t),(r&ve)!==0?Ce(e.i,a):e.i=a}function Ne(e,t,a,r,l,i,n,o,b,v,_){var g=(b&fe)!==0,x=(b&oa)===0,k=g?x?H(l,!1,!1):Re(l):l,c=(b&ve)===0?n:Re(n),T={i:c,v:k,k:i,a:null,e:null,prev:a,next:r};try{if(e===null){var s=document.createDocumentFragment();s.append(e=Fe())}return T.e=Ee(()=>o(e,k,c,v),D),T.e.prev=a&&a.e,T.e.next=r&&r.e,a===null?_||(t.first=T):(a.next=T,a.e.next=T.e),r!==null&&(r.prev=T,r.e.prev=T.e),T}finally{}}function pe(e,t,a){for(var r=e.next?e.next.e.nodes_start:a,l=t?t.e.nodes_start:a,i=e.e.nodes_start;i!==null&&i!==r;){var n=Ue(i);l.before(i),i=n}}function G(e,t,a){t===null?e.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}function Ra(e,t,a=!1,r=!1,l=!1){var i=e,n="";U(()=>{var o=Ke;if(n===(n=t()??"")){D&&Ae();return}if(o.nodes_start!==null&&(da(o.nodes_start,o.nodes_end),o.nodes_start=o.nodes_end=null),n!==""){if(D){W.data;for(var b=Ae(),v=b;b!==null&&(b.nodeType!==He||b.data!=="");)v=b,b=Ue(b);if(b===null)throw _a(),ha;qe(W,v),i=oe(b);return}var _=n+"";a?_=`<svg>${_}</svg>`:r&&(_=`<math>${_}</math>`);var g=ma(_);if((a||r)&&(g=te(g)),qe(te(g),g.lastChild),a||r)for(;te(g);)i.before(te(g));else i.before(g)}})}const $e=[...` 	
\r\f \v\uFEFF`];function qa(e,t,a){var r=""+e;if(a){for(var l in a)if(a[l])r=r?r+" "+l:l;else if(r.length)for(var i=l.length,n=0;(n=r.indexOf(l,n))>=0;){var o=n+i;(n===0||$e.includes(r[n-1]))&&(o===r.length||$e.includes(r[o]))?r=(n===0?"":r.substring(0,n))+r.substring(o+1):n=o}}return r===""?null:r}function Da(e,t){return e==null?null:String(e)}function $a(e,t,a,r,l,i){var n=e.__className;if(D||n!==a||n===void 0){var o=qa(a,r,i);(!D||o!==e.getAttribute("class"))&&(o==null?e.removeAttribute("class"):e.className=o),e.__className=a}else if(i&&l!==i)for(var b in i){var v=!!i[b];(l==null||v!==!!l[b])&&e.classList.toggle(b,v)}return i}function La(e,t,a,r){var l=e.__style;if(D||l!==t){var i=Da(t);(!D||i!==e.getAttribute("style"))&&(i==null?e.removeAttribute("style"):e.style.cssText=i),e.__style=t}return r}function Qe(e,t,a=!1){if(e.multiple){if(t==null)return;if(!ze(t))return pa();for(var r of e.options)r.selected=t.includes(re(r));return}for(r of e.options){var l=re(r);if(We(l,t)){r.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function Oa(e){var t=new MutationObserver(()=>{Qe(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ye(()=>{t.disconnect()})}function Fa(e,t,a=t){var r=!0;xe(e,"change",l=>{var i=l?"[selected]":":checked",n;if(e.multiple)n=[].map.call(e.querySelectorAll(i),re);else{var o=e.querySelector(i)??e.querySelector("option:not([disabled])");n=o&&re(o)}a(n)}),ba(()=>{var l=t();if(Qe(e,l,r),r&&l===void 0){var i=e.querySelector(":checked");i!==null&&(l=re(i),a(l))}e.__value=l,r=!1}),Oa(e)}function re(e){return"__value"in e?e.__value:e.value}const Ba=Symbol("is custom element"),Ha=Symbol("is html");function X(e){if(D){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;Le(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var l=e.checked;Le(e,"checked",null),e.checked=l}}};e.__on_r=a,ga(a),ya()}}function Le(e,t,a,r){var l=Pa(e);D&&(l[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||l[t]!==(l[t]=a)&&(t==="loading"&&(e[Ta]=a),e.removeAttribute(t))}function Pa(e){return e.__attributes??={[Ba]:e.nodeName.includes("-"),[Ha]:e.namespaceURI===wa}}function ue(e,t,a=t){var r=Aa(),l=new WeakSet;xe(e,"input",i=>{var n=i?e.defaultValue:e.value;if(n=Te(e)?we(n):n,a(n),Q!==null&&l.add(Q),r&&n!==(n=t())){var o=e.selectionStart,b=e.selectionEnd;e.value=n??"",b!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(b,e.value.length))}}),(D&&e.defaultValue!==e.value||Ea(t)==null&&e.value)&&(a(Te(e)?we(e.value):e.value),Q!==null&&l.add(Q)),Xe(()=>{var i=t();if(e===document.activeElement){var n=Ma??Q;if(l.has(n))return}Te(e)&&i===we(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}const ge=new Set;function ye(e,t,a,r,l=r){var i=a.getAttribute("type")==="checkbox",n=e;let o=!1;if(t!==null)for(var b of t)n=n[b]??=[];n.push(a),xe(a,"change",()=>{var v=a.__value;i&&(v=Oe(n,v,a.checked)),l(v)},()=>l(i?[]:null)),Xe(()=>{var v=r();if(D&&a.defaultChecked!==a.checked){o=!0;return}i?(v=v||[],a.checked=v.includes(a.__value)):a.checked=We(a.__value,v)}),Ye(()=>{var v=n.indexOf(a);v!==-1&&n.splice(v,1)}),ge.has(n)||(ge.add(n),Me(()=>{n.sort((v,_)=>v.compareDocumentPosition(_)===4?-1:1),ge.delete(n)})),Me(()=>{if(o){var v;if(i)v=Oe(n,v,a.checked);else{var _=n.find(g=>g.checked);v=_?.__value}l(v)}})}function Oe(e,t,a){for(var r=new Set,l=0;l<e.length;l+=1)e[l].checked&&r.add(e[l].__value);return a||r.delete(t),Array.from(r)}function Te(e){var t=e.type;return t==="number"||t==="range"}function we(e){return e===""?null:+e}var za=F("<option> </option>"),Ga=F('<tr class="svelte-ip6uip"><td class="svelte-ip6uip"> </td><td class="svelte-ip6uip"> </td></tr>'),Va=F('<label>Filter by Note:&nbsp; <select></select></label> <table class="svelte-ip6uip"><thead><tr class="svelte-ip6uip"><th class="svelte-ip6uip">Note</th><th class="svelte-ip6uip">Frequency (Hz)</th></tr></thead><tbody></tbody></table>',1);function Ua(e,t){ce(t,!0);const a=440,r=69,l=["C","C♯/D♭","D","D♯/E♭","E","F","F♯/G♭","G","G♯/A♭","A","A♯/B♭","B"];function i(s){return a*Math.pow(2,(s-r)/12)}function n(s=24,d=120){const p=[];for(let A=s;A<=d;A++){const E=l[A%12],y=Math.floor(A/12)-1,u=`${E}${y}`,h=i(A).toFixed(2);p.push({note:u,frequency:h})}return p}const o=n(),b=[...Array.from(new Set(o.map(s=>s.note.replace(/\d+$/,""))))];let v=Sa("C"),_=Na(()=>o.filter(s=>s.note.replace(/\d+$/,"")===f(v)));var g=Va(),x=J(g),k=S(N(x));ee(k,21,()=>b,j,(s,d)=>{var p=za(),A=N(p,!0);w(p);var E={};U(()=>{V(A,f(d)),E!==(E=f(d))&&(p.value=(p.__value=f(d))??"")}),$(s,p)}),w(k),w(x);var c=S(x,2),T=S(N(c));ee(T,21,()=>f(_),j,(s,d)=>{let p=()=>f(d).note,A=()=>f(d).frequency;var E=Ga(),y=N(E),u=N(y,!0);w(y);var h=S(y),m=N(h,!0);w(h),w(E),U(()=>{V(u,p()),V(m,A())}),$(s,E)}),w(T),w(c),Fa(k,()=>f(v),s=>I(v,s)),$(e,g),de()}var Ka=F('<p style="color: red;"> </p>'),Ya=F("<li> </li>"),Wa=F("<ul></ul>"),Xa=F("<p>No rhymes found.</p>"),Ja=F('<input placeholder="Enter a word to find rhymes..."/> <button> </button> <!>',1);function Qa(e,t){ce(t,!1);let a=H(""),r=H([]),l=H(!1),i=H(""),n=H(!1),o="";async function b(){if(!f(a).trim()||f(a)==o)return;I(l,!0),I(i,""),I(r,[]),I(n,!1);const s=`https://rhymebrain.com/talk?function=getRhymes&word=${encodeURIComponent(f(a))}&maxResults=50`;try{const d=await fetch(s);if(!d.ok)throw new Error(`API error: ${d.statusText}`);const p=await d.json();I(r,p)}catch(d){I(i,d.message)}finally{I(l,!1),I(n,!0),o=f(a)}}Se();var v=Ja(),_=J(v);X(_);var g=S(_,2),x=N(g,!0);w(g);var k=S(g,2);{var c=s=>{var d=Ka(),p=N(d);w(d),U(()=>V(p,`Error: ${f(i)??""}`)),$(s,d)},T=s=>{var d=De(),p=J(d);{var A=y=>{var u=Wa();ee(u,5,()=>f(r),j,(h,m)=>{var M=Ya(),R=N(M);w(M),U(()=>V(R,`${f(m).word??""} (score: ${f(m).score??""})`)),$(h,M)}),w(u),$(y,u)},E=y=>{var u=De(),h=J(u);{var m=M=>{var R=Xa();$(M,R)};be(h,M=>{f(n)&&!f(l)&&f(r).length===0&&M(m)},!0)}$(y,u)};be(p,y=>{f(r).length?y(A):y(E,!1)},!0)}$(s,d)};be(k,s=>{f(i)?s(c):s(T,!1)})}U(()=>{g.disabled=f(l),V(x,f(l)?"Loading...":"Find Rhymes")}),ue(_,()=>f(a),s=>I(a,s)),Z("keydown",_,s=>s.key==="Enter"&&b()),Z("click",g,b),$(e,v),de()}var Za=F('<th class="svelte-7zbovx"><!></th>'),ja=F('<td class="svelte-7zbovx"> </td>'),et=F('<label>BPM: <input type="number" min="1" class="svelte-7zbovx"/></label> <div><label><input type="radio"/> Straight</label> <label><input type="radio"/> Dotted</label> <label><input type="radio"/> Triplet</label></div> <table class="svelte-7zbovx"><thead><tr></tr></thead><tbody><tr></tr></tbody></table>',1);function at(e,t){ce(t,!1);const a=[];let r=H(120),l=H("straight");const i=[{label:"1",factor:1},{label:"1/2",factor:.5},{label:"1/4",factor:.25},{label:"1/8",factor:.125},{label:"1/16",factor:.0625},{label:"1/32",factor:.03125}],n=()=>60/f(r)*1e3,o=m=>{let M=n()*(m/.25);return f(l)==="dotted"&&(M*=1.5),f(l)==="triplet"&&(M*=2/3),M},b=m=>f(l)==="dotted"?`${m}<sup>D</sup>`:f(l)==="triplet"?`${m}<sup>T</sup>`:m;Se();var v=et(),_=J(v),g=S(N(_));X(g),w(_);var x=S(_,2),k=N(x),c=N(k);X(c),c.value=c.__value="straight",me(),w(k);var T=S(k,2),s=N(T);X(s),s.value=s.__value="dotted",me(),w(T);var d=S(T,2),p=N(d);X(p),p.value=p.__value="triplet",me(),w(d),w(x);var A=S(x,2),E=N(A),y=N(E);ee(y,5,()=>i,j,(m,M)=>{var R=Za(),O=N(R);Ra(O,()=>b(f(M).label)),w(R),$(m,R)}),w(y),w(E);var u=S(E),h=N(u);ee(h,5,()=>i,j,(m,M)=>{var R=ja(),O=N(R);w(R),U(L=>V(O,`${L??""} ms`),[()=>o(f(M).factor).toFixed(2)]),$(m,R)}),w(h),w(u),w(A),ue(g,()=>f(r),m=>I(r,m)),ye(a,[],c,()=>f(l),m=>I(l,m)),ye(a,[],s,()=>f(l),m=>I(l,m)),ye(a,[],p,()=>f(l),m=>I(l,m)),$(e,v),de()}var tt=F("<div></div>"),rt=F('<label> <div><button>-</button> <input type="range" min="40" max="240"/> <button>+</button></div></label> <div class="indicators svelte-91qvwv"></div> <label> <input type="range" min="1" max="12"/></label> <div><button> </button> <button>Tap Tempo</button></div>',1);function lt(e,t){ce(t,!1);let a=H(100),r=H(4),l=H(1),i=H(!1),n=[],o;xa(()=>{o=new(window.AudioContext||window.webkitAudioContext)});let b=25,v=.1,_=0,g=null,x=60/f(a),k=1,c=[];function T(C=!1,P=0){const B=o.createOscillator(),q=o.createGain();B.type="square",B.frequency.value=C?1500:1e3,q.gain.setValueAtTime(1,P),q.gain.exponentialRampToValueAtTime(.001,P+.1),B.connect(q),q.connect(o.destination),B.start(P),B.stop(P+.1)}function s(C,P){const B=Math.max(0,(P-o.currentTime)*1e3),q=setTimeout(()=>{f(i)&&I(l,C)},B);c.push(q)}function d(){x=60/f(a),_+=x,k=k%f(r)+1}function p(){for(;_<o.currentTime+v;){const C=k;T(C===1,_),s(C,_),d()}}async function A(){f(i)||(o.state==="suspended"&&await o.resume(),I(i,!0),k=1,I(l,1),_=o.currentTime,g=setInterval(p,b))}function E(){I(i,!1),g&&clearInterval(g),g=null,c.forEach(clearTimeout),c=[],I(l,1)}function y(){f(i)?E():A()}function u(){const C=performance.now();if(n.push(C),n.length>8&&n.shift(),n.length>=2){const P=[];for(let q=1;q<n.length;q++)P.push(n[q]-n[q-1]);const B=P.reduce((q,se)=>q+se,0)/P.length;I(a,Math.min(240,Math.max(40,Math.round(6e4/B))))}}function h(C){I(a,Math.min(240,Math.max(40,f(a)+C)))}Ia(()=>{g&&clearInterval(g),c.forEach(clearTimeout)}),Se();var m=rt(),M=J(m),R=N(M),O=S(R),L=N(O),K=S(L,2);X(K);var ae=S(K,2);w(O),w(M);var z=S(M,2);ee(z,5,()=>Array(f(r)),j,(C,P,B)=>{var q=tt();let se;q.textContent=B+1,U(ea=>se=$a(q,1,"indicator svelte-91qvwv",null,se,ea),[()=>({active:f(l)===B+1})]),$(C,q)}),w(z);var Y=S(z,2),le=N(Y),ne=S(le);X(ne),w(Y);var Ie=S(Y,2),ie=N(Ie),Ze=N(ie,!0);w(ie);var je=S(ie,2);w(Ie),U(()=>{V(R,`BPM: ${f(a)??""} `),La(z,`grid-template-rows:${f(r)??""}`),V(le,`Beats per Bar: ${f(r)??""} `),V(Ze,f(i)?"Stop":"Start")}),Z("click",L,C=>h(C.shiftKey?-5:-1)),ue(K,()=>f(a),C=>I(a,C)),Z("click",ae,C=>h(C.shiftKey?5:1)),ue(ne,()=>f(r),C=>I(r,C)),Z("click",ie,y),Z("click",je,u),$(e,m),de()}var nt=F("<h1>musictools</h1> <!> <!> <!> <!>",1);function vt(e){var t=nt(),a=S(J(t),2);Ua(a,{});var r=S(a,2);Qa(r,{});var l=S(r,2);at(l,{});var i=S(l,2);lt(i,{}),$(e,t)}export{vt as component};
