import"../chunks/DsnmJJEf.js";import{i as Ie}from"../chunks/C1RtFvxP.js";import{e as Pe,b as st,aD as Ge,s as ue,h as L,Z as le,a as Te,y as d,ap as nt,r as ot,H as it,c as De,d as he,k as Z,W as Ve,a0 as ut,f as Ee,i as ct,aE as ve,aF as fe,g as Q,aG as $e,az as G,aH as Ae,a4 as Ue,R as Ye,j as Ke,p as vt,aI as ft,aJ as me,M as Me,aK as ze,aL as dt,Y as We,aM as _t,a3 as ht,aN as mt,T as Ze,F as K,aO as pt,a1 as bt,$ as gt,a6 as qe,aP as yt,aQ as Ce,aj as kt,L as Je,aR as wt,aS as Qe,aT as Tt,aU as Et,aV as At,aW as Mt,aX as Nt,v as xt,ak as Xe,aY as St,ar as S,C as de,D as O,m as se,aA as It,o as D,G as _e,K as x,I as k,J as b,aB as Ct,l as Le,aq as Rt,aZ as ce}from"../chunks/IvixjwcP.js";import{s as z,e as V,o as Bt,a as Dt,b as $t}from"../chunks/ioPIwDI9.js";import{i as pe}from"../chunks/BH5vm-AB.js";function j(e,r){return r}function qt(e,r,t){for(var a=e.items,s=[],n=r.length,l=0;l<n;l++)_t(r[l].e,s,!0);var c=n>0&&s.length===0&&t!==null;if(c){var h=t.parentNode;ht(h),h.append(t),a.clear(),U(e,r[0].prev,r[n-1].next)}mt(s,()=>{for(var o=0;o<n;o++){var _=r[o];c||(a.delete(_.k),U(e,_.prev,_.next)),ze(_.e,!c)}})}function ee(e,r,t,a,s,n=null){var l=e,c={flags:r,items:new Map,first:null},h=(r&Ge)!==0;if(h){var o=e;l=L?ue(le(o)):o.appendChild(Pe())}L&&Te();var _=null,y=!1,A=new Map,N=nt(()=>{var T=t();return Ye(T)?T:T==null?[]:Ue(T)}),v,w;function f(){Lt(w,v,c,A,l,s,r,a,t),n!==null&&(v.length===0?_?Ke(_):_=Ee(()=>n(l)):_!==null&&vt(_,()=>{_=null}))}st(()=>{w??=Ze,v=d(N);var T=v.length;if(y&&T===0)return;y=T===0;let m=!1;if(L){var g=ot(l)===it;g!==(T===0)&&(l=De(),ue(l),he(!1),m=!0)}if(L){for(var M=null,p,i=0;i<T;i++){if(Z.nodeType===Ve&&Z.data===ut){l=Z,m=!0,he(!1);break}var u=v[i],E=a(u,i);p=Ne(Z,c,M,null,u,E,i,s,r,t),c.items.set(E,p),M=p}T>0&&ue(De())}if(L)T===0&&n&&(_=Ee(()=>n(l)));else if(ct()){var q=new Set,C=Q;for(i=0;i<T;i+=1){u=v[i],E=a(u,i);var R=c.items.get(E)??A.get(E);R?(r&(ve|fe))!==0&&je(R,u,i,r):(p=Ne(null,c,null,null,u,E,i,s,r,t,!0),A.set(E,p)),q.add(E)}for(const[$,W]of c.items)q.has($)||C.skipped_effects.add(W.e);C.add_callback(f)}else f();m&&he(!0),d(N)}),L&&(l=Z)}function Lt(e,r,t,a,s,n,l,c,h){var o=(l&dt)!==0,_=(l&(ve|fe))!==0,y=r.length,A=t.items,N=t.first,v=N,w,f=null,T,m=[],g=[],M,p,i,u;if(o)for(u=0;u<y;u+=1)M=r[u],p=c(M,u),i=A.get(p),i!==void 0&&(i.a?.measure(),(T??=new Set).add(i));for(u=0;u<y;u+=1){if(M=r[u],p=c(M,u),i=A.get(p),i===void 0){var E=a.get(p);if(E!==void 0){a.delete(p),A.set(p,E);var q=f?f.next:v;U(t,f,E),U(t,E,q),be(E,q,s),f=E}else{var C=v?v.e.nodes_start:s;f=Ne(C,t,f,f===null?t.first:f.next,M,p,u,n,l,h)}A.set(p,f),m=[],g=[],v=f.next;continue}if(_&&je(i,M,u,l),(i.e.f&me)!==0&&(Ke(i.e),o&&(i.a?.unfix(),(T??=new Set).delete(i))),i!==v){if(w!==void 0&&w.has(i)){if(m.length<g.length){var R=g[0],$;f=R.prev;var W=m[0],J=m[m.length-1];for($=0;$<m.length;$+=1)be(m[$],R,s);for($=0;$<g.length;$+=1)w.delete(g[$]);U(t,W.prev,J.next),U(t,f,W),U(t,J,R),v=R,f=J,u-=1,m=[],g=[]}else w.delete(i),be(i,v,s),U(t,i.prev,i.next),U(t,i,f===null?t.first:f.next),U(t,f,i),f=i;continue}for(m=[],g=[];v!==null&&v.k!==p;)(v.e.f&me)===0&&(w??=new Set).add(v),g.push(v),v=v.next;if(v===null)continue;i=v}m.push(i),f=i,v=i.next}if(v!==null||w!==void 0){for(var Y=w===void 0?[]:Ue(w);v!==null;)(v.e.f&me)===0&&Y.push(v),v=v.next;var te=Y.length;if(te>0){var ae=(l&Ge)!==0&&y===0?s:null;if(o){for(u=0;u<te;u+=1)Y[u].a?.measure();for(u=0;u<te;u+=1)Y[u].a?.fix()}qt(t,Y,ae)}}o&&Me(()=>{if(T!==void 0)for(i of T)i.a?.apply()}),e.first=t.first&&t.first.e,e.last=f&&f.e;for(var re of a.values())ze(re.e);a.clear()}function je(e,r,t,a){(a&ve)!==0&&$e(e.v,r),(a&fe)!==0?$e(e.i,t):e.i=t}function Ne(e,r,t,a,s,n,l,c,h,o,_){var y=(h&ve)!==0,A=(h&ft)===0,N=y?A?G(s,!1,!1):Ae(s):s,v=(h&fe)===0?l:Ae(l),w={i:v,v:N,k:n,a:null,e:null,prev:t,next:a};try{if(e===null){var f=document.createDocumentFragment();f.append(e=Pe())}return w.e=Ee(()=>c(e,N,v,o),L),w.e.prev=t&&t.e,w.e.next=a&&a.e,t===null?_||(r.first=w):(t.next=w,t.e.next=w.e),a!==null&&(a.prev=w,a.e.prev=w.e),w}finally{}}function be(e,r,t){for(var a=e.next?e.next.e.nodes_start:t,s=r?r.e.nodes_start:t,n=e.e.nodes_start;n!==null&&n!==a;){var l=We(n);s.before(n),n=l}}function U(e,r,t){r===null?e.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function Ot(e,r,t=!1,a=!1,s=!1){var n=e,l="";K(()=>{var c=Ze;if(l===(l=r()??"")){L&&Te();return}if(c.nodes_start!==null&&(pt(c.nodes_start,c.nodes_end),c.nodes_start=c.nodes_end=null),l!==""){if(L){Z.data;for(var h=Te(),o=h;h!==null&&(h.nodeType!==Ve||h.data!=="");)o=h,h=We(h);if(h===null)throw bt(),gt;qe(Z,o),n=ue(h);return}var _=l+"";t?_=`<svg>${_}</svg>`:a&&(_=`<math>${_}</math>`);var y=yt(_);if((t||a)&&(y=le(y)),qe(le(y),y.lastChild),t||a)for(;le(y);)n.before(le(y));else n.before(y)}})}const Oe=[...` 	
\r\f \v\uFEFF`];function Ft(e,r,t){var a=e==null?"":""+e;if(t){for(var s in t)if(t[s])a=a?a+" "+s:s;else if(a.length)for(var n=s.length,l=0;(l=a.indexOf(s,l))>=0;){var c=l+n;(l===0||Oe.includes(a[l-1]))&&(c===a.length||Oe.includes(a[c]))?a=(l===0?"":a.substring(0,l))+a.substring(c+1):l=c}}return a===""?null:a}function Fe(e,r,t,a,s,n){var l=e.__className;if(L||l!==t||l===void 0){var c=Ft(t,a,n);(!L||c!==e.getAttribute("class"))&&(c==null?e.removeAttribute("class"):e.className=c),e.__className=t}else if(n&&s!==n)for(var h in n){var o=!!n[h];(s==null||o!==!!s[h])&&e.classList.toggle(h,o)}return n}function et(e,r,t=!1){if(e.multiple){if(r==null)return;if(!Ye(r))return wt();for(var a of e.options)a.selected=r.includes(ne(a));return}for(a of e.options){var s=ne(a);if(Qe(s,r)){a.selected=!0;return}}(!t||r!==void 0)&&(e.selectedIndex=-1)}function Ht(e){var r=new MutationObserver(()=>{et(e,e.__value)});r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Je(()=>{r.disconnect()})}function Pt(e,r,t=r){var a=!0;Ce(e,"change",s=>{var n=s?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(n),ne);else{var c=e.querySelector(n)??e.querySelector("option:not([disabled])");l=c&&ne(c)}t(l)}),kt(()=>{var s=r();if(et(e,s,a),a&&s===void 0){var n=e.querySelector(":checked");n!==null&&(s=ne(n),t(s))}e.__value=s,a=!1}),Ht(e)}function ne(e){return"__value"in e?e.__value:e.value}const Gt=Symbol("is custom element"),Vt=Symbol("is html");function X(e){if(L){var r=!1,t=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var a=e.value;xe(e,"value",null),e.value=a}if(e.hasAttribute("checked")){var s=e.checked;xe(e,"checked",null),e.checked=s}}};e.__on_r=t,Et(t),At()}}function xe(e,r,t,a){var s=Ut(e);L&&(s[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||s[r]!==(s[r]=t)&&(r==="loading"&&(e[Mt]=t),e.removeAttribute(r))}function Ut(e){return e.__attributes??={[Gt]:e.nodeName.includes("-"),[Vt]:e.namespaceURI===Tt}}function Se(e,r,t=r){var a=Nt(),s=new WeakSet;Ce(e,"input",n=>{var l=n?e.defaultValue:e.value;if(l=ke(e)?we(l):l,t(l),Q!==null&&s.add(Q),a&&l!==(l=r())){var c=e.selectionStart,h=e.selectionEnd;e.value=l??"",h!==null&&(e.selectionStart=c,e.selectionEnd=Math.min(h,e.value.length))}}),(L&&e.defaultValue!==e.value||xt(r)==null&&e.value)&&(t(ke(e)?we(e.value):e.value),Q!==null&&s.add(Q)),Xe(()=>{var n=r();if(e===document.activeElement){var l=St??Q;if(s.has(l))return}ke(e)&&n===we(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}const ge=new Set;function ye(e,r,t,a,s=a){var n=t.getAttribute("type")==="checkbox",l=e;let c=!1;if(r!==null)for(var h of r)l=l[h]??=[];l.push(t),Ce(t,"change",()=>{var o=t.__value;n&&(o=He(l,o,t.checked)),s(o)},()=>s(n?[]:null)),Xe(()=>{var o=a();if(L&&t.defaultChecked!==t.checked){c=!0;return}n?(o=o||[],t.checked=o.includes(t.__value)):t.checked=Qe(t.__value,o)}),Je(()=>{var o=l.indexOf(t);o!==-1&&l.splice(o,1)}),ge.has(l)||(ge.add(l),Me(()=>{l.sort((o,_)=>o.compareDocumentPosition(_)===4?-1:1),ge.delete(l)})),Me(()=>{if(c){var o;if(n)o=He(l,o,t.checked);else{var _=l.find(y=>y.checked);o=_?.__value}s(o)}})}function He(e,r,t){for(var a=new Set,s=0;s<e.length;s+=1)e[s].checked&&a.add(e[s].__value);return t||a.delete(r),Array.from(a)}function ke(e){var r=e.type;return r==="number"||r==="range"}function we(e){return e===""?null:+e}function Yt(e){var r=Ae(0);return function(){return arguments.length===1?(S(r,d(r)+1),arguments[0]):(d(r),e())}}var Kt=O("<option> </option>"),zt=O('<tr><td class="svelte-1cuwsce"> </td><td class="svelte-1cuwsce"> </td></tr>'),Wt=O('<label for="note">Filter by Note:&nbsp; <select id="note"></select></label> <table class="svelte-1cuwsce"><thead><tr><th class="svelte-1cuwsce">Note</th><th class="svelte-1cuwsce">Frequency (Hz)</th></tr></thead><tbody></tbody></table>',1);function Zt(e,r){de(r,!0);const t=440,a=69,s=["C","C♯/D♭","D","D♯/E♭","E","F","F♯/G♭","G","G♯/A♭","A","A♯/B♭","B"];function n(f){return t*Math.pow(2,(f-a)/12)}function l(f=24,T=120){const m=[];for(let g=f;g<=T;g++){const M=s[g%12],p=Math.floor(g/12)-1,i=`${M}${p}`,u=n(g).toFixed(2);m.push({note:i,frequency:u})}return m}const c=l(),h=[...Array.from(new Set(c.map(f=>f.note.replace(/\d+$/,""))))];let o=It("C"),_=Ct(()=>c.filter(f=>f.note.replace(/\d+$/,"")===d(o)));var y=Wt(),A=se(y),N=x(k(A));ee(N,21,()=>h,j,(f,T)=>{var m=Kt(),g=k(m,!0);b(m);var M={};K(()=>{z(g,d(T)),M!==(M=d(T))&&(m.value=(m.__value=d(T))??"")}),D(f,m)}),b(N),b(A);var v=x(A,2),w=x(k(v));ee(w,21,()=>d(_),j,(f,T)=>{let m=()=>d(T).note,g=()=>d(T).frequency;var M=zt(),p=k(M),i=k(p,!0);b(p);var u=x(p),E=k(u,!0);b(u),b(M),K(()=>{z(i,m()),z(E,g())}),D(f,M)}),b(w),b(v),Pt(N,()=>d(o),f=>S(o,f)),D(e,y),_e()}var Jt=O('<p style="color: red;"> </p>'),Qt=O("<li> </li>"),Xt=O("<ul></ul>"),jt=O("<p>No rhymes found.</p>"),ea=O('<div class="controls svelte-ixmgl9"><input placeholder="Enter a word..." class="svelte-ixmgl9"/> <button> </button></div> <div class="output svelte-ixmgl9"><!></div>',1);function ta(e,r){de(r,!1);let t=G(""),a=G([]),s=G(!1),n=G(""),l=G(!1),c="";async function h(){if(!d(t).trim()||d(t)==c)return;S(s,!0),S(n,""),S(a,[]),S(l,!1);const m=`https://rhymebrain.com/talk?function=getRhymes&word=${encodeURIComponent(d(t))}&maxResults=50`;try{const g=await fetch(m);if(!g.ok)throw new Error(`API error: ${g.statusText}`);const M=await g.json();S(a,M)}catch(g){S(n,g.message)}finally{S(s,!1),S(l,!0),c=d(t)}}Ie();var o=ea(),_=se(o),y=k(_);X(y);var A=x(y,2),N=k(A,!0);b(A),b(_);var v=x(_,2),w=k(v);{var f=m=>{var g=Jt(),M=k(g);b(g),K(()=>z(M,`Error: ${d(n)??""}`)),D(m,g)},T=m=>{var g=Le(),M=se(g);{var p=u=>{var E=Xt();ee(E,5,()=>d(a),j,(q,C)=>{var R=Qt(),$=k(R);b(R),K(()=>z($,`${d(C).word??""} (score: ${d(C).score??""})`)),D(q,R)}),b(E),D(u,E)},i=u=>{var E=Le(),q=se(E);{var C=R=>{var $=jt();D(R,$)};pe(q,R=>{d(l)&&!d(s)&&d(a).length===0&&R(C)},!0)}D(u,E)};pe(M,u=>{d(a).length?u(p):u(i,!1)},!0)}D(m,g)};pe(w,m=>{d(n)?m(f):m(T,!1)})}b(v),K(()=>{A.disabled=d(s),z(N,d(s)?"Loading...":"Find Rhymes")}),Se(y,()=>d(t),m=>S(t,m)),V("keydown",y,m=>m.key==="Enter"&&h()),V("click",A,h),D(e,o),_e()}const tt=Rt({currentBpm:120});var aa=O('<th class="svelte-oyl45m"><!></th>'),ra=O('<td class="svelte-oyl45m"> </td>'),la=O('<div><label><input type="radio"/> Straight</label> <label><input type="radio"/> Dotted</label> <label><input type="radio"/> Triplet</label></div> <table class="svelte-oyl45m"><thead><tr></tr></thead><tbody><tr></tr></tbody></table>',1);function sa(e,r){de(r,!1);const t=[];let a=G("straight");const s=[{label:"1",factor:1},{label:"1/2",factor:.5},{label:"1/4",factor:.25},{label:"1/8",factor:.125},{label:"1/16",factor:.0625},{label:"1/32",factor:.03125}],n=()=>60/tt.currentBpm*1e3,l=p=>{let i=n()*(p/.25);return d(a)==="dotted"&&(i*=1.5),d(a)==="triplet"&&(i*=2/3),i},c=p=>d(a)==="dotted"?`${p}<sup>D</sup>`:d(a)==="triplet"?`${p}<sup>T</sup>`:p;Ie();var h=la(),o=se(h),_=k(o),y=k(_);X(y),y.value=y.__value="straight",ce(),b(_);var A=x(_,2),N=k(A);X(N),N.value=N.__value="dotted",ce(),b(A);var v=x(A,2),w=k(v);X(w),w.value=w.__value="triplet",ce(),b(v),b(o);var f=x(o,2),T=k(f),m=k(T);ee(m,5,()=>s,j,(p,i)=>{var u=aa(),E=k(u);Ot(E,()=>c(d(i).label)),b(u),D(p,u)}),b(m),b(T);var g=x(T),M=k(g);ee(M,5,()=>s,j,(p,i)=>{var u=ra(),E=k(u);b(u),K(q=>z(E,`${q??""} ms`),[()=>l(d(i).factor).toFixed(2)]),D(p,u)}),b(M),b(g),b(f),ye(t,[],y,()=>d(a),p=>S(a,p)),ye(t,[],N,()=>d(a),p=>S(a,p)),ye(t,[],w,()=>d(a),p=>S(a,p)),D(e,h),_e()}var P=Yt(()=>tt),na=O("<div></div>"),oa=O('<main class="svelte-or93cl"><h1 class="svelte-or93cl"><a> </a></h1> <div class="bpmControls svelte-or93cl"><button class="svelte-or93cl">-</button> <input type="range" min="40" max="240" class="svelte-or93cl"/> <button class="svelte-or93cl">+</button></div> <div class="indicators svelte-or93cl"></div> <div class="perBar svelte-or93cl"><input type="range" min="1" max="12" class="svelte-or93cl"/></div> <div class="buttons svelte-or93cl"><button class="svelte-or93cl"> </button> <button class="svelte-or93cl">Tap Tempo</button></div></main>');function ia(e,r){de(r,!1);let t=G(4),a=G(1),s=G(!1),n=[],l;Bt(()=>{l=new(window.AudioContext||window.webkitAudioContext)});let c=25,h=.1,o=0,_=null,y=60/P().currentBpm,A=1,N=[],v=G(!1);function w(I=!1,H=0){const F=l.createOscillator(),B=l.createGain();F.type="square",F.frequency.value=I?1500:1e3,B.gain.setValueAtTime(1,H),B.gain.exponentialRampToValueAtTime(.001,H+.1),F.connect(B),B.connect(l.destination),F.start(H),F.stop(H+.1)}function f(I,H){const F=Math.max(0,(H-l.currentTime)*1e3),B=setTimeout(()=>{d(s)&&S(a,I)},F);N.push(B)}function T(){y=60/P().currentBpm,o+=y,A=A%d(t)+1}function m(){for(;o<l.currentTime+h;){const I=A;w(I===1,o),f(I,o),T()}}async function g(){d(s)||(l.state==="suspended"&&await l.resume(),S(s,!0),A=1,S(a,1),o=l.currentTime,_=setInterval(m,c))}function M(){S(s,!1),_&&clearInterval(_),_=null,N.forEach(clearTimeout),N=[],S(a,1)}function p(){d(s)?M():g()}function i(){const I=performance.now();if(n.push(I),n.length>8&&n.shift(),n.length>=2){const H=[];for(let B=1;B<n.length;B++)H.push(n[B]-n[B-1]);const F=H.reduce((B,ie)=>B+ie,0)/H.length;P(P().currentBpm=Math.min(240,Math.max(40,Math.round(6e4/F))))}}function u(I){P(P().currentBpm=Math.min(240,Math.max(40,P().currentBpm+I)))}Dt(()=>{_&&clearInterval(_),N.forEach(clearTimeout)}),Ie();var E=oa(),q=k(E),C=k(q);xe(C,"href",null);let R;var $=k(C,!0);b(C),b(q);var W=x(q,2),J=k(W),Y=x(J,2);X(Y);var te=x(Y,2);b(W);var ae=x(W,2);ee(ae,5,()=>Array(d(t)),j,(I,H,F)=>{var B=na();let ie;B.textContent=F+1,K(lt=>ie=Fe(B,1,"indicator svelte-or93cl",null,ie,lt),[()=>({active:d(a)===F+1})]),D(I,B)}),b(ae);var re=x(ae,2),Re=k(re);X(Re),b(re);var Be=x(re,2),oe=k(Be),at=k(oe,!0);b(oe);var rt=x(oe,2);b(Be),b(E),K(I=>{R=Fe(C,1,"svelte-or93cl",null,R,I),z($,P().currentBpm),z(at,d(s)?"Stop":"Start")},[()=>({touched:d(v)})]),V("click",C,i),V("mousedown",C,()=>S(v,!0)),V("mouseup",C,()=>S(v,!1)),V("mouseleave",C,()=>S(v,!1)),V("click",J,I=>u(I.shiftKey?-5:-1)),Se(Y,()=>P().currentBpm,I=>P(P().currentBpm=I)),V("click",te,I=>u(I.shiftKey?5:1)),Se(Re,()=>d(t),I=>S(t,I)),V("click",oe,p),V("click",rt,i),D(e,E),_e()}var ua=O('<link rel="stylesheet" href="https://fixedsys.javanile.org/css/fixedsys-dark.css"/>'),ca=O('<article class="wrapper svelte-1371kom"><section class="notetohz svelte-1371kom"><fieldset class="svelte-1371kom"><legend class="svelte-1371kom">Covert note to HZ:</legend> <!></fieldset></section> <section class="metronome svelte-1371kom"><fieldset class="svelte-1371kom"><legend class="svelte-1371kom">Metronome:</legend> <!></fieldset></section> <section class="rhymes svelte-1371kom"><fieldset class="svelte-1371kom"><legend class="svelte-1371kom">Rhymebrain:</legend> <!></fieldset></section> <section class="bpmtoms svelte-1371kom"><fieldset class="svelte-1371kom"><legend class="svelte-1371kom">BPM subdivisions:</legend> <!></fieldset></section> <section class="links svelte-1371kom"><fieldset class="svelte-1371kom"><legend class="svelte-1371kom">External links:</legend> <ul class="svelte-1371kom"><li><a href="https://www.hooktheory.com/trends" target="_blank">hooktheory</a></li> <li><a href="https://www.scales-chords.com/chordid.php" target="_blank">chordtools</a></li></ul></fieldset></section></article>');function ma(e){var r=ca();$t(v=>{var w=ua();D(v,w)});var t=k(r),a=k(t),s=x(k(a),2);Zt(s,{}),b(a),b(t);var n=x(t,2),l=k(n),c=x(k(l),2);ia(c,{}),b(l),b(n);var h=x(n,2),o=k(h),_=x(k(o),2);ta(_,{}),b(o),b(h);var y=x(h,2),A=k(y),N=x(k(A),2);sa(N,{}),b(A),b(y),ce(2),b(r),D(e,r)}export{ma as component};
