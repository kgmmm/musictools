import"../chunks/DsnmJJEf.js";import{i as Ie}from"../chunks/XsFUNtTL.js";import{e as Oe,b as at,aC as Fe,s as ue,h as B,W as re,a as Ae,y as d,ao as rt,r as nt,H as lt,c as Ce,d as _e,k as W,X as He,$ as it,f as Ee,i as st,aD as fe,aE as ve,g as Z,aF as Re,ay as V,aG as Me,a3 as Ge,R as Pe,j as Ve,p as ot,aH as ut,aI as he,M as Ne,aJ as ze,aK as ft,Z as Ue,aL as vt,a2 as ct,aM as dt,T as Ke,F as K,aN as _t,a0 as ht,_ as mt,a5 as Be,aO as pt,aP as ke,ai as bt,L as Ye,aQ as gt,aR as We,aS as yt,aT as Tt,aU as wt,aV as At,aW as Et,v as Mt,aj as Xe,aX as Nt,aq as k,C as ce,D,m as X,az as St,o as $,G as de,K as x,I as S,J as w,aA as xt,l as $e,ap as It,aY as me}from"../chunks/CfKNbmIC.js";import{s as z,e as j,o as kt,a as Ct}from"../chunks/DI3xAFWa.js";import{i as pe}from"../chunks/BwJmvh14.js";function te(e,a){return a}function Rt(e,a,t){for(var r=e.items,l=[],i=a.length,n=0;n<i;n++)vt(a[n].e,l,!0);var f=i>0&&l.length===0&&t!==null;if(f){var p=t.parentNode;ct(p),p.append(t),r.clear(),P(e,a[0].prev,a[i-1].next)}dt(l,()=>{for(var u=0;u<i;u++){var h=a[u];f||(r.delete(h.k),P(e,h.prev,h.next)),ze(h.e,!f)}})}function ae(e,a,t,r,l,i=null){var n=e,f={flags:a,items:new Map,first:null},p=(a&Fe)!==0;if(p){var u=e;n=B?ue(re(u)):u.appendChild(Oe())}B&&Ae();var h=null,g=!1,E=new Map,N=rt(()=>{var _=t();return Pe(_)?_:_==null?[]:Ge(_)}),m,y;function o(){Bt(y,m,f,E,n,l,a,r,t),i!==null&&(m.length===0?h?Ve(h):h=Ee(()=>i(n)):h!==null&&ot(h,()=>{h=null}))}at(()=>{y??=Ke,m=d(N);var _=m.length;if(g&&_===0)return;g=_===0;let b=!1;if(B){var A=nt(n)===lt;A!==(_===0)&&(n=Ce(),ue(n),_e(!1),b=!0)}if(B){for(var M=null,c,s=0;s<_;s++){if(W.nodeType===He&&W.data===it){n=W,b=!0,_e(!1);break}var v=m[s],T=r(v,s);c=Se(W,f,M,null,v,T,s,l,a,t),f.items.set(T,c),M=c}_>0&&ue(Ce())}if(B)_===0&&i&&(h=Ee(()=>i(n)));else if(st()){var C=new Set,O=Z;for(s=0;s<_;s+=1){v=m[s],T=r(v,s);var G=f.items.get(T)??E.get(T);G?(a&(fe|ve))!==0&&Je(G,v,s,a):(c=Se(null,f,null,null,v,T,s,l,a,t,!0),E.set(T,c)),C.add(T)}for(const[q,J]of f.items)C.has(q)||O.skipped_effects.add(J.e);O.add_callback(o)}else o();b&&_e(!0),d(N)}),B&&(n=W)}function Bt(e,a,t,r,l,i,n,f,p){var u=(n&ft)!==0,h=(n&(fe|ve))!==0,g=a.length,E=t.items,N=t.first,m=N,y,o=null,_,b=[],A=[],M,c,s,v;if(u)for(v=0;v<g;v+=1)M=a[v],c=f(M,v),s=E.get(c),s!==void 0&&(s.a?.measure(),(_??=new Set).add(s));for(v=0;v<g;v+=1){if(M=a[v],c=f(M,v),s=E.get(c),s===void 0){var T=r.get(c);if(T!==void 0){r.delete(c),E.set(c,T);var C=o?o.next:m;P(t,o,T),P(t,T,C),be(T,C,l),o=T}else{var O=m?m.e.nodes_start:l;o=Se(O,t,o,o===null?t.first:o.next,M,c,v,i,n,p)}E.set(c,o),b=[],A=[],m=o.next;continue}if(h&&Je(s,M,v,n),(s.e.f&he)!==0&&(Ve(s.e),u&&(s.a?.unfix(),(_??=new Set).delete(s))),s!==m){if(y!==void 0&&y.has(s)){if(b.length<A.length){var G=A[0],q;o=G.prev;var J=b[0],Y=b[b.length-1];for(q=0;q<b.length;q+=1)be(b[q],G,l);for(q=0;q<A.length;q+=1)y.delete(A[q]);P(t,J.prev,Y.next),P(t,o,J),P(t,Y,G),m=G,o=Y,v-=1,b=[],A=[]}else y.delete(s),be(s,m,l),P(t,s.prev,s.next),P(t,s,o===null?t.first:o.next),P(t,o,s),o=s;continue}for(b=[],A=[];m!==null&&m.k!==c;)(m.e.f&he)===0&&(y??=new Set).add(m),A.push(m),m=m.next;if(m===null)continue;s=m}b.push(s),o=s,m=s.next}if(m!==null||y!==void 0){for(var U=y===void 0?[]:Ge(y);m!==null;)(m.e.f&he)===0&&U.push(m),m=m.next;var Q=U.length;if(Q>0){var le=(n&Fe)!==0&&g===0?l:null;if(u){for(v=0;v<Q;v+=1)U[v].a?.measure();for(v=0;v<Q;v+=1)U[v].a?.fix()}Rt(t,U,le)}}u&&Ne(()=>{if(_!==void 0)for(s of _)s.a?.apply()}),e.first=t.first&&t.first.e,e.last=o&&o.e;for(var ie of r.values())ze(ie.e);r.clear()}function Je(e,a,t,r){(r&fe)!==0&&Re(e.v,a),(r&ve)!==0?Re(e.i,t):e.i=t}function Se(e,a,t,r,l,i,n,f,p,u,h){var g=(p&fe)!==0,E=(p&ut)===0,N=g?E?V(l,!1,!1):Me(l):l,m=(p&ve)===0?n:Me(n),y={i:m,v:N,k:i,a:null,e:null,prev:t,next:r};try{if(e===null){var o=document.createDocumentFragment();o.append(e=Oe())}return y.e=Ee(()=>f(e,N,m,u),B),y.e.prev=t&&t.e,y.e.next=r&&r.e,t===null?h||(a.first=y):(t.next=y,t.e.next=y.e),r!==null&&(r.prev=y,r.e.prev=y.e),y}finally{}}function be(e,a,t){for(var r=e.next?e.next.e.nodes_start:t,l=a?a.e.nodes_start:t,i=e.e.nodes_start;i!==null&&i!==r;){var n=Ue(i);l.before(i),i=n}}function P(e,a,t){a===null?e.first=t:(a.next=t,a.e.next=t&&t.e),t!==null&&(t.prev=a,t.e.prev=a&&a.e)}function $t(e,a,t=!1,r=!1,l=!1){var i=e,n="";K(()=>{var f=Ke;if(n===(n=a()??"")){B&&Ae();return}if(f.nodes_start!==null&&(_t(f.nodes_start,f.nodes_end),f.nodes_start=f.nodes_end=null),n!==""){if(B){W.data;for(var p=Ae(),u=p;p!==null&&(p.nodeType!==He||p.data!=="");)u=p,p=Ue(p);if(p===null)throw ht(),mt;Be(W,u),i=ue(p);return}var h=n+"";t?h=`<svg>${h}</svg>`:r&&(h=`<math>${h}</math>`);var g=pt(h);if((t||r)&&(g=re(g)),Be(re(g),g.lastChild),t||r)for(;re(g);)i.before(re(g));else i.before(g)}})}const qe=[...` 	
\r\f \v\uFEFF`];function qt(e,a,t){var r=""+e;if(t){for(var l in t)if(t[l])r=r?r+" "+l:l;else if(r.length)for(var i=l.length,n=0;(n=r.indexOf(l,n))>=0;){var f=n+i;(n===0||qe.includes(r[n-1]))&&(f===r.length||qe.includes(r[f]))?r=(n===0?"":r.substring(0,n))+r.substring(f+1):n=f}}return r===""?null:r}function Dt(e,a){return e==null?null:String(e)}function Lt(e,a,t,r,l,i){var n=e.__className;if(B||n!==t||n===void 0){var f=qt(t,r,i);(!B||f!==e.getAttribute("class"))&&(f==null?e.removeAttribute("class"):e.className=f),e.__className=t}else if(i&&l!==i)for(var p in i){var u=!!i[p];(l==null||u!==!!l[p])&&e.classList.toggle(p,u)}return i}function Ot(e,a,t,r){var l=e.__style;if(B||l!==a){var i=Dt(a);(!B||i!==e.getAttribute("style"))&&(i==null?e.removeAttribute("style"):e.style.cssText=i),e.__style=a}return r}function Qe(e,a,t=!1){if(e.multiple){if(a==null)return;if(!Pe(a))return gt();for(var r of e.options)r.selected=a.includes(ne(r));return}for(r of e.options){var l=ne(r);if(We(l,a)){r.selected=!0;return}}(!t||a!==void 0)&&(e.selectedIndex=-1)}function Ft(e){var a=new MutationObserver(()=>{Qe(e,e.__value)});a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ye(()=>{a.disconnect()})}function Ht(e,a,t=a){var r=!0;ke(e,"change",l=>{var i=l?"[selected]":":checked",n;if(e.multiple)n=[].map.call(e.querySelectorAll(i),ne);else{var f=e.querySelector(i)??e.querySelector("option:not([disabled])");n=f&&ne(f)}t(n)}),bt(()=>{var l=a();if(Qe(e,l,r),r&&l===void 0){var i=e.querySelector(":checked");i!==null&&(l=ne(i),t(l))}e.__value=l,r=!1}),Ft(e)}function ne(e){return"__value"in e?e.__value:e.value}const Gt=Symbol("is custom element"),Pt=Symbol("is html");function ee(e){if(B){var a=!1,t=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var r=e.value;De(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var l=e.checked;De(e,"checked",null),e.checked=l}}};e.__on_r=t,yt(t),Tt()}}function De(e,a,t,r){var l=Vt(e);B&&(l[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||l[a]!==(l[a]=t)&&(a==="loading"&&(e[wt]=t),e.removeAttribute(a))}function Vt(e){return e.__attributes??={[Gt]:e.nodeName.includes("-"),[Pt]:e.namespaceURI===At}}function xe(e,a,t=a){var r=Et(),l=new WeakSet;ke(e,"input",i=>{var n=i?e.defaultValue:e.value;if(n=Te(e)?we(n):n,t(n),Z!==null&&l.add(Z),r&&n!==(n=a())){var f=e.selectionStart,p=e.selectionEnd;e.value=n??"",p!==null&&(e.selectionStart=f,e.selectionEnd=Math.min(p,e.value.length))}}),(B&&e.defaultValue!==e.value||Mt(a)==null&&e.value)&&(t(Te(e)?we(e.value):e.value),Z!==null&&l.add(Z)),Xe(()=>{var i=a();if(e===document.activeElement){var n=Nt??Z;if(l.has(n))return}Te(e)&&i===we(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}const ge=new Set;function ye(e,a,t,r,l=r){var i=t.getAttribute("type")==="checkbox",n=e;let f=!1;if(a!==null)for(var p of a)n=n[p]??=[];n.push(t),ke(t,"change",()=>{var u=t.__value;i&&(u=Le(n,u,t.checked)),l(u)},()=>l(i?[]:null)),Xe(()=>{var u=r();if(B&&t.defaultChecked!==t.checked){f=!0;return}i?(u=u||[],t.checked=u.includes(t.__value)):t.checked=We(t.__value,u)}),Ye(()=>{var u=n.indexOf(t);u!==-1&&n.splice(u,1)}),ge.has(n)||(ge.add(n),Ne(()=>{n.sort((u,h)=>u.compareDocumentPosition(h)===4?-1:1),ge.delete(n)})),Ne(()=>{if(f){var u;if(i)u=Le(n,u,t.checked);else{var h=n.find(g=>g.checked);u=h?.__value}l(u)}})}function Le(e,a,t){for(var r=new Set,l=0;l<e.length;l+=1)e[l].checked&&r.add(e[l].__value);return t||r.delete(a),Array.from(r)}function Te(e){var a=e.type;return a==="number"||a==="range"}function we(e){return e===""?null:+e}function zt(e){var a=Me(0);return function(){return arguments.length===1?(k(a,d(a)+1),arguments[0]):(d(a),e())}}var Ut=D("<option> </option>"),Kt=D('<tr class="svelte-ip6uip"><td class="svelte-ip6uip"> </td><td class="svelte-ip6uip"> </td></tr>'),Yt=D('<label>Filter by Note:&nbsp; <select></select></label> <table class="svelte-ip6uip"><thead><tr class="svelte-ip6uip"><th class="svelte-ip6uip">Note</th><th class="svelte-ip6uip">Frequency (Hz)</th></tr></thead><tbody></tbody></table>',1);function Wt(e,a){ce(a,!0);const t=440,r=69,l=["C","C♯/D♭","D","D♯/E♭","E","F","F♯/G♭","G","G♯/A♭","A","A♯/B♭","B"];function i(o){return t*Math.pow(2,(o-r)/12)}function n(o=24,_=120){const b=[];for(let A=o;A<=_;A++){const M=l[A%12],c=Math.floor(A/12)-1,s=`${M}${c}`,v=i(A).toFixed(2);b.push({note:s,frequency:v})}return b}const f=n(),p=[...Array.from(new Set(f.map(o=>o.note.replace(/\d+$/,""))))];let u=St("C"),h=xt(()=>f.filter(o=>o.note.replace(/\d+$/,"")===d(u)));var g=Yt(),E=X(g),N=x(S(E));ae(N,21,()=>p,te,(o,_)=>{var b=Ut(),A=S(b,!0);w(b);var M={};K(()=>{z(A,d(_)),M!==(M=d(_))&&(b.value=(b.__value=d(_))??"")}),$(o,b)}),w(N),w(E);var m=x(E,2),y=x(S(m));ae(y,21,()=>d(h),te,(o,_)=>{let b=()=>d(_).note,A=()=>d(_).frequency;var M=Kt(),c=S(M),s=S(c,!0);w(c);var v=x(c),T=S(v,!0);w(v),w(M),K(()=>{z(s,b()),z(T,A())}),$(o,M)}),w(y),w(m),Ht(N,()=>d(u),o=>k(u,o)),$(e,g),de()}var Xt=D('<p style="color: red;"> </p>'),Jt=D("<li> </li>"),Qt=D("<ul></ul>"),Zt=D("<p>No rhymes found.</p>"),jt=D('<input placeholder="Enter a word to find rhymes..."/> <button> </button> <!>',1);function ea(e,a){ce(a,!1);let t=V(""),r=V([]),l=V(!1),i=V(""),n=V(!1),f="";async function p(){if(!d(t).trim()||d(t)==f)return;k(l,!0),k(i,""),k(r,[]),k(n,!1);const o=`https://rhymebrain.com/talk?function=getRhymes&word=${encodeURIComponent(d(t))}&maxResults=50`;try{const _=await fetch(o);if(!_.ok)throw new Error(`API error: ${_.statusText}`);const b=await _.json();k(r,b)}catch(_){k(i,_.message)}finally{k(l,!1),k(n,!0),f=d(t)}}Ie();var u=jt(),h=X(u);ee(h);var g=x(h,2),E=S(g,!0);w(g);var N=x(g,2);{var m=o=>{var _=Xt(),b=S(_);w(_),K(()=>z(b,`Error: ${d(i)??""}`)),$(o,_)},y=o=>{var _=$e(),b=X(_);{var A=c=>{var s=Qt();ae(s,5,()=>d(r),te,(v,T)=>{var C=Jt(),O=S(C);w(C),K(()=>z(O,`${d(T).word??""} (score: ${d(T).score??""})`)),$(v,C)}),w(s),$(c,s)},M=c=>{var s=$e(),v=X(s);{var T=C=>{var O=Zt();$(C,O)};pe(v,C=>{d(n)&&!d(l)&&d(r).length===0&&C(T)},!0)}$(c,s)};pe(b,c=>{d(r).length?c(A):c(M,!1)},!0)}$(o,_)};pe(N,o=>{d(i)?o(m):o(y,!1)})}K(()=>{g.disabled=d(l),z(E,d(l)?"Loading...":"Find Rhymes")}),xe(h,()=>d(t),o=>k(t,o)),j("keydown",h,o=>o.key==="Enter"&&p()),j("click",g,p),$(e,u),de()}const Ze=It({currentBpm:120});var ta=D('<th class="svelte-7zbovx"><!></th>'),aa=D('<td class="svelte-7zbovx"> </td>'),ra=D('<div><label><input type="radio"/> Straight</label> <label><input type="radio"/> Dotted</label> <label><input type="radio"/> Triplet</label></div> <table class="svelte-7zbovx"><thead><tr></tr></thead><tbody><tr></tr></tbody></table>',1);function na(e,a){ce(a,!1);const t=[];let r=V("straight");const l=[{label:"1",factor:1},{label:"1/2",factor:.5},{label:"1/4",factor:.25},{label:"1/8",factor:.125},{label:"1/16",factor:.0625},{label:"1/32",factor:.03125}],i=()=>60/Ze.currentBpm*1e3,n=c=>{let s=i()*(c/.25);return d(r)==="dotted"&&(s*=1.5),d(r)==="triplet"&&(s*=2/3),s},f=c=>d(r)==="dotted"?`${c}<sup>D</sup>`:d(r)==="triplet"?`${c}<sup>T</sup>`:c;Ie();var p=ra(),u=X(p),h=S(u),g=S(h);ee(g),g.value=g.__value="straight",me(),w(h);var E=x(h,2),N=S(E);ee(N),N.value=N.__value="dotted",me(),w(E);var m=x(E,2),y=S(m);ee(y),y.value=y.__value="triplet",me(),w(m),w(u);var o=x(u,2),_=S(o),b=S(_);ae(b,5,()=>l,te,(c,s)=>{var v=ta(),T=S(v);$t(T,()=>f(d(s).label)),w(v),$(c,v)}),w(b),w(_);var A=x(_),M=S(A);ae(M,5,()=>l,te,(c,s)=>{var v=aa(),T=S(v);w(v),K(C=>z(T,`${C??""} ms`),[()=>n(d(s).factor).toFixed(2)]),$(c,v)}),w(M),w(A),w(o),ye(t,[],g,()=>d(r),c=>k(r,c)),ye(t,[],N,()=>d(r),c=>k(r,c)),ye(t,[],y,()=>d(r),c=>k(r,c)),$(e,p),de()}var H=zt(()=>Ze),la=D("<div></div>"),ia=D('<label> <div><button>-</button> <input type="range" min="40" max="240"/> <button>+</button></div></label> <div class="indicators svelte-91qvwv"></div> <label> <input type="range" min="1" max="12"/></label> <div><button> </button> <button>Tap Tempo</button></div>',1);function sa(e,a){ce(a,!1);let t=V(4),r=V(1),l=V(!1),i=[],n;kt(()=>{n=new(window.AudioContext||window.webkitAudioContext)});let f=25,p=.1,u=0,h=null,g=60/H().currentBpm,E=1,N=[];function m(I=!1,F=0){const L=n.createOscillator(),R=n.createGain();L.type="square",L.frequency.value=I?1500:1e3,R.gain.setValueAtTime(1,F),R.gain.exponentialRampToValueAtTime(.001,F+.1),L.connect(R),R.connect(n.destination),L.start(F),L.stop(F+.1)}function y(I,F){const L=Math.max(0,(F-n.currentTime)*1e3),R=setTimeout(()=>{d(l)&&k(r,I)},L);N.push(R)}function o(){g=60/H().currentBpm,u+=g,E=E%d(t)+1}function _(){for(;u<n.currentTime+p;){const I=E;m(I===1,u),y(I,u),o()}}async function b(){d(l)||(n.state==="suspended"&&await n.resume(),k(l,!0),E=1,k(r,1),u=n.currentTime,h=setInterval(_,f))}function A(){k(l,!1),h&&clearInterval(h),h=null,N.forEach(clearTimeout),N=[],k(r,1)}function M(){d(l)?A():b()}function c(){const I=performance.now();if(i.push(I),i.length>8&&i.shift(),i.length>=2){const F=[];for(let R=1;R<i.length;R++)F.push(i[R]-i[R-1]);const L=F.reduce((R,oe)=>R+oe,0)/F.length;H(H().currentBpm=Math.min(240,Math.max(40,Math.round(6e4/L))))}}function s(I){H(H().currentBpm=Math.min(240,Math.max(40,H().currentBpm+I)))}Ct(()=>{h&&clearInterval(h),N.forEach(clearTimeout)}),Ie();var v=ia(),T=X(v),C=S(T),O=x(C),G=S(O),q=x(G,2);ee(q);var J=x(q,2);w(O),w(T);var Y=x(T,2);ae(Y,5,()=>Array(d(t)),te,(I,F,L)=>{var R=la();let oe;R.textContent=L+1,K(tt=>oe=Lt(R,1,"indicator svelte-91qvwv",null,oe,tt),[()=>({active:d(r)===L+1})]),$(I,R)}),w(Y);var U=x(Y,2),Q=S(U),le=x(Q);ee(le),w(U);var ie=x(U,2),se=S(ie),je=S(se,!0);w(se);var et=x(se,2);w(ie),K(()=>{z(C,`BPM: ${H().currentBpm??""} `),Ot(Y,`grid-template-rows:${d(t)??""}`),z(Q,`Beats per Bar: ${d(t)??""} `),z(je,d(l)?"Stop":"Start")}),j("click",G,I=>s(I.shiftKey?-5:-1)),xe(q,()=>H().currentBpm,I=>H(H().currentBpm=I)),j("click",J,I=>s(I.shiftKey?5:1)),xe(le,()=>d(t),I=>k(t,I)),j("click",se,M),j("click",et,c),$(e,v),de()}var oa=D("<h1>musictools</h1> <!> <!> <!> <!>",1);function _a(e){var a=oa(),t=x(X(a),2);Wt(t,{});var r=x(t,2);ea(r,{});var l=x(r,2);na(l,{});var i=x(l,2);sa(i,{}),$(e,a)}export{_a as component};
