import"../chunks/DsnmJJEf.js";import{i as Ie}from"../chunks/C1RtFvxP.js";import{e as ze,b as nt,aD as Ge,s as ue,h as L,Z as le,a as ke,y as d,ap as st,r as ot,H as it,c as De,d as he,k as J,W as Pe,a0 as ut,f as Ae,i as ct,aE as ve,aF as fe,g as X,aG as $e,az as G,aH as Ee,a4 as Ve,R as Ue,j as Ye,p as vt,aI as ft,aJ as me,M as xe,aK as Ke,aL as dt,Y as We,aM as _t,a3 as ht,aN as mt,T as Je,F as Y,aO as bt,a1 as pt,$ as gt,a6 as qe,aP as yt,aQ as Ce,aj as wt,L as Qe,aR as Tt,aS as Xe,aT as kt,aU as At,aV as Et,aW as xt,aX as Nt,v as Mt,ak as Ze,aY as St,ar as M,C as de,D as O,m as ne,aA as It,o as D,G as _e,K as I,I as A,J as g,aB as Ct,l as Le,aq as Rt,aZ as ce}from"../chunks/IvixjwcP.js";import{s as K,e as P,o as Bt,a as Dt,b as $t}from"../chunks/ioPIwDI9.js";import{i as be}from"../chunks/BH5vm-AB.js";function j(e,a){return a}function qt(e,a,t){for(var r=e.items,n=[],s=a.length,l=0;l<s;l++)_t(a[l].e,n,!0);var c=s>0&&n.length===0&&t!==null;if(c){var m=t.parentNode;ht(m),m.append(t),r.clear(),V(e,a[0].prev,a[s-1].next)}mt(n,()=>{for(var o=0;o<s;o++){var _=a[o];c||(r.delete(_.k),V(e,_.prev,_.next)),Ke(_.e,!c)}})}function ee(e,a,t,r,n,s=null){var l=e,c={flags:a,items:new Map,first:null},m=(a&Ge)!==0;if(m){var o=e;l=L?ue(le(o)):o.appendChild(ze())}L&&ke();var _=null,y=!1,x=new Map,N=st(()=>{var w=t();return Ue(w)?w:w==null?[]:Ve(w)}),v,T;function f(){Lt(T,v,c,x,l,n,a,r,t),s!==null&&(v.length===0?_?Ye(_):_=Ae(()=>s(l)):_!==null&&vt(_,()=>{_=null}))}nt(()=>{T??=Je,v=d(N);var w=v.length;if(y&&w===0)return;y=w===0;let h=!1;if(L){var p=ot(l)===it;p!==(w===0)&&(l=De(),ue(l),he(!1),h=!0)}if(L){for(var E=null,b,i=0;i<w;i++){if(J.nodeType===Pe&&J.data===ut){l=J,h=!0,he(!1);break}var u=v[i],k=r(u,i);b=Ne(J,c,E,null,u,k,i,n,a,t),c.items.set(k,b),E=b}w>0&&ue(De())}if(L)w===0&&s&&(_=Ae(()=>s(l)));else if(ct()){var q=new Set,C=X;for(i=0;i<w;i+=1){u=v[i],k=r(u,i);var R=c.items.get(k)??x.get(k);R?(a&(ve|fe))!==0&&je(R,u,i,a):(b=Ne(null,c,null,null,u,k,i,n,a,t,!0),x.set(k,b)),q.add(k)}for(const[$,W]of c.items)q.has($)||C.skipped_effects.add(W.e);C.add_callback(f)}else f();h&&he(!0),d(N)}),L&&(l=J)}function Lt(e,a,t,r,n,s,l,c,m){var o=(l&dt)!==0,_=(l&(ve|fe))!==0,y=a.length,x=t.items,N=t.first,v=N,T,f=null,w,h=[],p=[],E,b,i,u;if(o)for(u=0;u<y;u+=1)E=a[u],b=c(E,u),i=x.get(b),i!==void 0&&(i.a?.measure(),(w??=new Set).add(i));for(u=0;u<y;u+=1){if(E=a[u],b=c(E,u),i=x.get(b),i===void 0){var k=r.get(b);if(k!==void 0){r.delete(b),x.set(b,k);var q=f?f.next:v;V(t,f,k),V(t,k,q),pe(k,q,n),f=k}else{var C=v?v.e.nodes_start:n;f=Ne(C,t,f,f===null?t.first:f.next,E,b,u,s,l,m)}x.set(b,f),h=[],p=[],v=f.next;continue}if(_&&je(i,E,u,l),(i.e.f&me)!==0&&(Ye(i.e),o&&(i.a?.unfix(),(w??=new Set).delete(i))),i!==v){if(T!==void 0&&T.has(i)){if(h.length<p.length){var R=p[0],$;f=R.prev;var W=h[0],Q=h[h.length-1];for($=0;$<h.length;$+=1)pe(h[$],R,n);for($=0;$<p.length;$+=1)T.delete(p[$]);V(t,W.prev,Q.next),V(t,f,W),V(t,Q,R),v=R,f=Q,u-=1,h=[],p=[]}else T.delete(i),pe(i,v,n),V(t,i.prev,i.next),V(t,i,f===null?t.first:f.next),V(t,f,i),f=i;continue}for(h=[],p=[];v!==null&&v.k!==b;)(v.e.f&me)===0&&(T??=new Set).add(v),p.push(v),v=v.next;if(v===null)continue;i=v}h.push(i),f=i,v=i.next}if(v!==null||T!==void 0){for(var U=T===void 0?[]:Ve(T);v!==null;)(v.e.f&me)===0&&U.push(v),v=v.next;var te=U.length;if(te>0){var ae=(l&Ge)!==0&&y===0?n:null;if(o){for(u=0;u<te;u+=1)U[u].a?.measure();for(u=0;u<te;u+=1)U[u].a?.fix()}qt(t,U,ae)}}o&&xe(()=>{if(w!==void 0)for(i of w)i.a?.apply()}),e.first=t.first&&t.first.e,e.last=f&&f.e;for(var re of r.values())Ke(re.e);r.clear()}function je(e,a,t,r){(r&ve)!==0&&$e(e.v,a),(r&fe)!==0?$e(e.i,t):e.i=t}function Ne(e,a,t,r,n,s,l,c,m,o,_){var y=(m&ve)!==0,x=(m&ft)===0,N=y?x?G(n,!1,!1):Ee(n):n,v=(m&fe)===0?l:Ee(l),T={i:v,v:N,k:s,a:null,e:null,prev:t,next:r};try{if(e===null){var f=document.createDocumentFragment();f.append(e=ze())}return T.e=Ae(()=>c(e,N,v,o),L),T.e.prev=t&&t.e,T.e.next=r&&r.e,t===null?_||(a.first=T):(t.next=T,t.e.next=T.e),r!==null&&(r.prev=T,r.e.prev=T.e),T}finally{}}function pe(e,a,t){for(var r=e.next?e.next.e.nodes_start:t,n=a?a.e.nodes_start:t,s=e.e.nodes_start;s!==null&&s!==r;){var l=We(s);n.before(s),s=l}}function V(e,a,t){a===null?e.first=t:(a.next=t,a.e.next=t&&t.e),t!==null&&(t.prev=a,t.e.prev=a&&a.e)}function Ot(e,a,t=!1,r=!1,n=!1){var s=e,l="";Y(()=>{var c=Je;if(l===(l=a()??"")){L&&ke();return}if(c.nodes_start!==null&&(bt(c.nodes_start,c.nodes_end),c.nodes_start=c.nodes_end=null),l!==""){if(L){J.data;for(var m=ke(),o=m;m!==null&&(m.nodeType!==Pe||m.data!=="");)o=m,m=We(m);if(m===null)throw pt(),gt;qe(J,o),s=ue(m);return}var _=l+"";t?_=`<svg>${_}</svg>`:r&&(_=`<math>${_}</math>`);var y=yt(_);if((t||r)&&(y=le(y)),qe(le(y),y.lastChild),t||r)for(;le(y);)s.before(le(y));else s.before(y)}})}const Oe=[...` 	
\r\f \v\uFEFF`];function Ft(e,a,t){var r=e==null?"":""+e;if(t){for(var n in t)if(t[n])r=r?r+" "+n:n;else if(r.length)for(var s=n.length,l=0;(l=r.indexOf(n,l))>=0;){var c=l+s;(l===0||Oe.includes(r[l-1]))&&(c===r.length||Oe.includes(r[c]))?r=(l===0?"":r.substring(0,l))+r.substring(c+1):l=c}}return r===""?null:r}function Fe(e,a,t,r,n,s){var l=e.__className;if(L||l!==t||l===void 0){var c=Ft(t,r,s);(!L||c!==e.getAttribute("class"))&&(c==null?e.removeAttribute("class"):e.className=c),e.__className=t}else if(s&&n!==s)for(var m in s){var o=!!s[m];(n==null||o!==!!n[m])&&e.classList.toggle(m,o)}return s}function et(e,a,t=!1){if(e.multiple){if(a==null)return;if(!Ue(a))return Tt();for(var r of e.options)r.selected=a.includes(se(r));return}for(r of e.options){var n=se(r);if(Xe(n,a)){r.selected=!0;return}}(!t||a!==void 0)&&(e.selectedIndex=-1)}function Ht(e){var a=new MutationObserver(()=>{et(e,e.__value)});a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Qe(()=>{a.disconnect()})}function zt(e,a,t=a){var r=!0;Ce(e,"change",n=>{var s=n?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(s),se);else{var c=e.querySelector(s)??e.querySelector("option:not([disabled])");l=c&&se(c)}t(l)}),wt(()=>{var n=a();if(et(e,n,r),r&&n===void 0){var s=e.querySelector(":checked");s!==null&&(n=se(s),t(n))}e.__value=n,r=!1}),Ht(e)}function se(e){return"__value"in e?e.__value:e.value}const Gt=Symbol("is custom element"),Pt=Symbol("is html");function Z(e){if(L){var a=!1,t=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var r=e.value;Me(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var n=e.checked;Me(e,"checked",null),e.checked=n}}};e.__on_r=t,At(t),Et()}}function Me(e,a,t,r){var n=Vt(e);L&&(n[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||n[a]!==(n[a]=t)&&(a==="loading"&&(e[xt]=t),e.removeAttribute(a))}function Vt(e){return e.__attributes??={[Gt]:e.nodeName.includes("-"),[Pt]:e.namespaceURI===kt}}function Se(e,a,t=a){var r=Nt(),n=new WeakSet;Ce(e,"input",s=>{var l=s?e.defaultValue:e.value;if(l=we(e)?Te(l):l,t(l),X!==null&&n.add(X),r&&l!==(l=a())){var c=e.selectionStart,m=e.selectionEnd;e.value=l??"",m!==null&&(e.selectionStart=c,e.selectionEnd=Math.min(m,e.value.length))}}),(L&&e.defaultValue!==e.value||Mt(a)==null&&e.value)&&(t(we(e)?Te(e.value):e.value),X!==null&&n.add(X)),Ze(()=>{var s=a();if(e===document.activeElement){var l=St??X;if(n.has(l))return}we(e)&&s===Te(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}const ge=new Set;function ye(e,a,t,r,n=r){var s=t.getAttribute("type")==="checkbox",l=e;let c=!1;if(a!==null)for(var m of a)l=l[m]??=[];l.push(t),Ce(t,"change",()=>{var o=t.__value;s&&(o=He(l,o,t.checked)),n(o)},()=>n(s?[]:null)),Ze(()=>{var o=r();if(L&&t.defaultChecked!==t.checked){c=!0;return}s?(o=o||[],t.checked=o.includes(t.__value)):t.checked=Xe(t.__value,o)}),Qe(()=>{var o=l.indexOf(t);o!==-1&&l.splice(o,1)}),ge.has(l)||(ge.add(l),xe(()=>{l.sort((o,_)=>o.compareDocumentPosition(_)===4?-1:1),ge.delete(l)})),xe(()=>{if(c){var o;if(s)o=He(l,o,t.checked);else{var _=l.find(y=>y.checked);o=_?.__value}n(o)}})}function He(e,a,t){for(var r=new Set,n=0;n<e.length;n+=1)e[n].checked&&r.add(e[n].__value);return t||r.delete(a),Array.from(r)}function we(e){var a=e.type;return a==="number"||a==="range"}function Te(e){return e===""?null:+e}function Ut(e){var a=Ee(0);return function(){return arguments.length===1?(M(a,d(a)+1),arguments[0]):(d(a),e())}}var Yt=O("<option> </option>"),Kt=O('<tr><td class="svelte-1cuwsce"> </td><td class="svelte-1cuwsce"> </td></tr>'),Wt=O('<label for="note">Filter by Note:&nbsp; <select id="note"></select></label> <table class="svelte-1cuwsce"><thead><tr><th class="svelte-1cuwsce">Note</th><th class="svelte-1cuwsce">Frequency (Hz)</th></tr></thead><tbody></tbody></table>',1);function Jt(e,a){de(a,!0);const t=440,r=69,n=["C","C♯/D♭","D","D♯/E♭","E","F","F♯/G♭","G","G♯/A♭","A","A♯/B♭","B"];function s(f){return t*Math.pow(2,(f-r)/12)}function l(f=24,w=120){const h=[];for(let p=f;p<=w;p++){const E=n[p%12],b=Math.floor(p/12)-1,i=`${E}${b}`,u=s(p).toFixed(2);h.push({note:i,frequency:u})}return h}const c=l(),m=[...Array.from(new Set(c.map(f=>f.note.replace(/\d+$/,""))))];let o=It("C"),_=Ct(()=>c.filter(f=>f.note.replace(/\d+$/,"")===d(o)));var y=Wt(),x=ne(y),N=I(A(x));ee(N,21,()=>m,j,(f,w)=>{var h=Yt(),p=A(h,!0);g(h);var E={};Y(()=>{K(p,d(w)),E!==(E=d(w))&&(h.value=(h.__value=d(w))??"")}),D(f,h)}),g(N),g(x);var v=I(x,2),T=I(A(v));ee(T,21,()=>d(_),j,(f,w)=>{let h=()=>d(w).note,p=()=>d(w).frequency;var E=Kt(),b=A(E),i=A(b,!0);g(b);var u=I(b),k=A(u,!0);g(u),g(E),Y(()=>{K(i,h()),K(k,p())}),D(f,E)}),g(T),g(v),zt(N,()=>d(o),f=>M(o,f)),D(e,y),_e()}var Qt=O('<p style="color: red;"> </p>'),Xt=O("<li> </li>"),Zt=O("<ul></ul>"),jt=O("<p>No rhymes found.</p>"),ea=O('<div class="controls svelte-71kgbk"><input placeholder="Enter a word..." class="svelte-71kgbk"/> <button> </button></div> <div class="output svelte-71kgbk"><!></div>',1);function ta(e,a){de(a,!1);let t=G(""),r=G([]),n=G(!1),s=G(""),l=G(!1),c="";async function m(){if(!d(t).trim()||d(t)==c)return;M(n,!0),M(s,""),M(r,[]),M(l,!1);const h=`https://rhymebrain.com/talk?function=getRhymes&word=${encodeURIComponent(d(t))}&maxResults=50`;try{const p=await fetch(h);if(!p.ok)throw new Error(`API error: ${p.statusText}`);const E=await p.json();M(r,E)}catch(p){M(s,p.message)}finally{M(n,!1),M(l,!0),c=d(t)}}Ie();var o=ea(),_=ne(o),y=A(_);Z(y);var x=I(y,2),N=A(x,!0);g(x),g(_);var v=I(_,2),T=A(v);{var f=h=>{var p=Qt(),E=A(p);g(p),Y(()=>K(E,`Error: ${d(s)??""}`)),D(h,p)},w=h=>{var p=Le(),E=ne(p);{var b=u=>{var k=Zt();ee(k,5,()=>d(r),j,(q,C)=>{var R=Xt(),$=A(R);g(R),Y(()=>K($,`${d(C).word??""} (score: ${d(C).score??""})`)),D(q,R)}),g(k),D(u,k)},i=u=>{var k=Le(),q=ne(k);{var C=R=>{var $=jt();D(R,$)};be(q,R=>{d(l)&&!d(n)&&d(r).length===0&&R(C)},!0)}D(u,k)};be(E,u=>{d(r).length?u(b):u(i,!1)},!0)}D(h,p)};be(T,h=>{d(s)?h(f):h(w,!1)})}g(v),Y(()=>{x.disabled=d(n),K(N,d(n)?"Loading...":"Find Rhymes")}),Se(y,()=>d(t),h=>M(t,h)),P("keydown",y,h=>h.key==="Enter"&&m()),P("click",x,m),D(e,o),_e()}const tt=Rt({currentBpm:120});var aa=O('<th class="svelte-oyl45m"><!></th>'),ra=O('<td class="svelte-oyl45m"> </td>'),la=O('<div><label><input type="radio"/> Straight</label> <label><input type="radio"/> Dotted</label> <label><input type="radio"/> Triplet</label></div> <table class="svelte-oyl45m"><thead><tr></tr></thead><tbody><tr></tr></tbody></table>',1);function na(e,a){de(a,!1);const t=[];let r=G("straight");const n=[{label:"1",factor:1},{label:"1/2",factor:.5},{label:"1/4",factor:.25},{label:"1/8",factor:.125},{label:"1/16",factor:.0625},{label:"1/32",factor:.03125}],s=()=>60/tt.currentBpm*1e3,l=b=>{let i=s()*(b/.25);return d(r)==="dotted"&&(i*=1.5),d(r)==="triplet"&&(i*=2/3),i},c=b=>d(r)==="dotted"?`${b}<sup>D</sup>`:d(r)==="triplet"?`${b}<sup>T</sup>`:b;Ie();var m=la(),o=ne(m),_=A(o),y=A(_);Z(y),y.value=y.__value="straight",ce(),g(_);var x=I(_,2),N=A(x);Z(N),N.value=N.__value="dotted",ce(),g(x);var v=I(x,2),T=A(v);Z(T),T.value=T.__value="triplet",ce(),g(v),g(o);var f=I(o,2),w=A(f),h=A(w);ee(h,5,()=>n,j,(b,i)=>{var u=aa(),k=A(u);Ot(k,()=>c(d(i).label)),g(u),D(b,u)}),g(h),g(w);var p=I(w),E=A(p);ee(E,5,()=>n,j,(b,i)=>{var u=ra(),k=A(u);g(u),Y(q=>K(k,`${q??""} ms`),[()=>l(d(i).factor).toFixed(2)]),D(b,u)}),g(E),g(p),g(f),ye(t,[],y,()=>d(r),b=>M(r,b)),ye(t,[],N,()=>d(r),b=>M(r,b)),ye(t,[],T,()=>d(r),b=>M(r,b)),D(e,m),_e()}var z=Ut(()=>tt),sa=O("<div></div>"),oa=O('<main class="svelte-or93cl"><h1 class="svelte-or93cl"><a> </a></h1> <div class="bpmControls svelte-or93cl"><button class="svelte-or93cl">-</button> <input type="range" min="40" max="240" class="svelte-or93cl"/> <button class="svelte-or93cl">+</button></div> <div class="indicators svelte-or93cl"></div> <div class="perBar svelte-or93cl"><input type="range" min="1" max="12" class="svelte-or93cl"/></div> <div class="buttons svelte-or93cl"><button class="svelte-or93cl"> </button> <button class="svelte-or93cl">Tap Tempo</button></div></main>');function ia(e,a){de(a,!1);let t=G(4),r=G(1),n=G(!1),s=[],l;Bt(()=>{l=new(window.AudioContext||window.webkitAudioContext)});let c=25,m=.1,o=0,_=null,y=60/z().currentBpm,x=1,N=[],v=G(!1);function T(S=!1,H=0){const F=l.createOscillator(),B=l.createGain();F.type="square",F.frequency.value=S?1500:1e3,B.gain.setValueAtTime(1,H),B.gain.exponentialRampToValueAtTime(.001,H+.1),F.connect(B),B.connect(l.destination),F.start(H),F.stop(H+.1)}function f(S,H){const F=Math.max(0,(H-l.currentTime)*1e3),B=setTimeout(()=>{d(n)&&M(r,S)},F);N.push(B)}function w(){y=60/z().currentBpm,o+=y,x=x%d(t)+1}function h(){for(;o<l.currentTime+m;){const S=x;T(S===1,o),f(S,o),w()}}async function p(){d(n)||(l.state==="suspended"&&await l.resume(),M(n,!0),x=1,M(r,1),o=l.currentTime,_=setInterval(h,c))}function E(){M(n,!1),_&&clearInterval(_),_=null,N.forEach(clearTimeout),N=[],M(r,1)}function b(){d(n)?E():p()}function i(){const S=performance.now();if(s.push(S),s.length>8&&s.shift(),s.length>=2){const H=[];for(let B=1;B<s.length;B++)H.push(s[B]-s[B-1]);const F=H.reduce((B,ie)=>B+ie,0)/H.length;z(z().currentBpm=Math.min(240,Math.max(40,Math.round(6e4/F))))}}function u(S){z(z().currentBpm=Math.min(240,Math.max(40,z().currentBpm+S)))}Dt(()=>{_&&clearInterval(_),N.forEach(clearTimeout)}),Ie();var k=oa(),q=A(k),C=A(q);Me(C,"href",null);let R;var $=A(C,!0);g(C),g(q);var W=I(q,2),Q=A(W),U=I(Q,2);Z(U);var te=I(U,2);g(W);var ae=I(W,2);ee(ae,5,()=>Array(d(t)),j,(S,H,F)=>{var B=sa();let ie;B.textContent=F+1,Y(lt=>ie=Fe(B,1,"indicator svelte-or93cl",null,ie,lt),[()=>({active:d(r)===F+1})]),D(S,B)}),g(ae);var re=I(ae,2),Re=A(re);Z(Re),g(re);var Be=I(re,2),oe=A(Be),at=A(oe,!0);g(oe);var rt=I(oe,2);g(Be),g(k),Y(S=>{R=Fe(C,1,"svelte-or93cl",null,R,S),K($,z().currentBpm),K(at,d(n)?"Stop":"Start")},[()=>({touched:d(v)})]),P("click",C,i),P("mousedown",C,()=>M(v,!0)),P("mouseup",C,()=>M(v,!1)),P("mouseleave",C,()=>M(v,!1)),P("click",Q,S=>u(S.shiftKey?-5:-1)),Se(U,()=>z().currentBpm,S=>z(z().currentBpm=S)),P("click",te,S=>u(S.shiftKey?5:1)),Se(Re,()=>d(t),S=>M(t,S)),P("click",oe,b),P("click",rt,i),D(e,k),_e()}var ua=O('<link rel="stylesheet" href="https://fixedsys.javanile.org/css/fixedsys-dark.css"/>'),ca=O('<article class="wrapper svelte-1xsoz7d"><section class="notetohz svelte-1xsoz7d"><!></section> <section class="metronome svelte-1xsoz7d"><!></section> <section class="rhymes svelte-1xsoz7d"><!></section> <section class="bpmtoms svelte-1xsoz7d"><!></section> <section class="links svelte-1xsoz7d"><ul class="svelte-1xsoz7d"><li><a href="https://www.hooktheory.com/trends" target="_blank">hooktheory</a></li> <li><a href="https://www.scales-chords.com/chordid.php" target="_blank">chordtools</a></li></ul></section></article>');function ma(e){var a=ca();$t(_=>{var y=ua();D(_,y)});var t=A(a),r=A(t);Jt(r,{}),g(t);var n=I(t,2),s=A(n);ia(s,{}),g(n);var l=I(n,2),c=A(l);ta(c,{}),g(l);var m=I(l,2),o=A(m);na(o,{}),g(m),ce(2),g(a),D(e,a)}export{ma as component};
